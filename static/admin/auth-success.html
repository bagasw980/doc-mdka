<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Login Success</title>
  </head>
  <body>
    <script>
      const urlParams = new URLSearchParams(window.location.search);
      const token = urlParams.get("token");

      if (token) {
        localStorage.setItem(
          "netlify-cms-user",
          JSON.stringify({
            auth: {
              token: token,
            },
            backendName: "github",
            login: true,
          })
        );
        // Redirect ke CMS dashboard tanpa token di URL
        window.location.href = "/admin";
      } else {
        document.body.innerHTML = "<h1>Token not found.</h1>";
      }
    </script>
  </body>
</html>
